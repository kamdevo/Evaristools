import{r as n,j as e,H as J}from"./app-CPNA5fkj.js";import{a as K,B as x}from"./createLucideIcon-CNZUbRUR.js";import{L as p}from"./label-Df9ZlVEi.js";import{S as h,a as g,b as f,c as j,d as s}from"./select-BtBs2LAY.js";import{T as Q,a as d}from"./ToolCard-DvrNwqcD.js";import{F as Y}from"./FileUploadZone-Bf4dPOuB.js";import{P as W,S as ee,r as re}from"./PDFButton-CLIvPWXs.js";import{C as se,A as te}from"./driver-XYzfMZAG.js";import{F as ae}from"./file-text-B0fBpE6E.js";import{C as oe}from"./circle-check-big-CW96IzkE.js";import{D as ie}from"./download-g0joWv_C.js";import{U as ne}from"./upload-B_bVGoQi.js";import{L as le}from"./loader-circle-Brj18nMe.js";import"./app-Cr7akxs5.js";import"./index-CRnDzTJV.js";import"./index-BElPaYps.js";import"./index-CK-lEGpX.js";import"./index-lXKd38Td.js";import"./index-BS5SJy3R.js";import"./index-6UVGBoHO.js";import"./check-4S0zZpaR.js";import"./badge-kZYjAK_4.js";import"./arrow-left-DbcVuJzq.js";import"./building-2-DNyTMdoQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],z=K("Hash",ce);function Ee(){const[i,y]=n.useState(null),[P,S]=n.useState(!1),[w,v]=n.useState(!1),[m,b]=n.useState(""),[C,l]=n.useState(""),[de,me]=n.useState(!1),[a,u]=n.useState({position:"bottom-center",startNumber:1,format:"page-of-total",fontSize:12}),I=n.useRef(null),T=()=>{te({showProgress:!0,popoverClass:"driverjs-theme",prevBtnText:"Anterior",nextBtnText:"Siguiente",doneBtnText:"Finalizar",steps:[{element:'[data-tour="upload-zone"]',popover:{title:"Paso 1: Seleccionar PDF",description:"Arrastra tu archivo PDF aquí o haz clic para seleccionarlo. El archivo debe ser menor a 50MB.",side:"bottom",align:"start"}},{element:'[data-tour="options"]',popover:{title:"Paso 2: Configurar Opciones",description:"Personaliza la posición, formato, tamaño de fuente y número de inicio para los números de página.",side:"left",align:"start"}},{element:'[data-tour="actions"]',popover:{title:"Paso 3: Aplicar Números",description:'Haz clic en "Agregar Números de Página" para procesar tu documento. Una vez completado, podrás descargarlo.',side:"left",align:"start"}}]}).drive()},F=r=>{const t=r[0];if(t){if(t.type!=="application/pdf"){l("Por favor selecciona un archivo PDF válido.");return}if(t.size>50*1024*1024){l("El archivo es demasiado grande. Máximo 50MB permitido.");return}y(t),l(""),v(!1),b("")}},A=r=>{const t=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let o="";for(const[c,N]of t)for(;r>=c;)o+=N,r-=c;return o.toLowerCase()},B=(r,t)=>{switch(a.format){case"number":return`${r}`;case"page-of-total":return`${r} de ${t}`;case"roman":return A(r);default:return`${r}`}},L=(r,t,o)=>{switch(a.position){case"top-left":return{x:30,y:t-30};case"top-center":return{x:(r-o)/2,y:t-30};case"top-right":return{x:r-o-30,y:t-30};case"bottom-left":return{x:30,y:30};case"bottom-center":return{x:(r-o)/2,y:30};case"bottom-right":return{x:r-o-30,y:30};default:return{x:(r-o)/2,y:30}}},E=async()=>{if(i){S(!0),l("");try{const r=await i.arrayBuffer(),t=await W.load(r),o=t.getPages(),c=await t.embedFont(ee.Helvetica),N=o.length;o.forEach((k,H)=>{const $=H+a.startNumber,D=B($,N+a.startNumber-1),q=c.widthOfTextAtSize(D,a.fontSize),{width:X,height:_}=k.getSize(),{x:Z,y:G}=L(X,_,q);k.drawText(D,{x:Z,y:G,size:a.fontSize,font:c,color:re(0,0,0)})});const R=await t.save(),M=new Blob([R],{type:"application/pdf"}),V=URL.createObjectURL(M);b(V),v(!0)}catch(r){console.error("Error adding page numbers:",r),l("Error al agregar números de página. Por favor intenta de nuevo.")}finally{S(!1)}}},O=()=>{if(!m||!i)return;const r=document.createElement("a");r.href=m,r.download=`${i.name.replace(".pdf","")}_numerado.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},U=()=>{y(null),v(!1),b(""),l(""),m&&URL.revokeObjectURL(m)};return e.jsxs(e.Fragment,{children:[e.jsx(J,{title:"Números de Página - Evaristools"}),e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900",children:[e.jsx(Q,{title:"Números de Página",description:"Añade números de página personalizados a tus documentos PDF",icon:z}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6","data-tour":"upload",children:[!i&&e.jsxs(d,{title:"Seleccionar PDF","data-tour":"upload-zone",children:[e.jsx(Y,{onFileSelect:F,acceptedTypes:".pdf",title:"Arrastra tu PDF aquí",subtitle:"o haz clic para seleccionar (máximo 50MB)"}),e.jsx("input",{ref:I,type:"file",accept:".pdf",onChange:r=>r.target.files&&F(r.target.files),className:"hidden"})]}),i&&!w&&e.jsx(d,{title:"Archivo Seleccionado",children:e.jsx("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ae,{className:"h-8 w-8 text-institutional"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:i.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[(i.size/1024/1024).toFixed(2)," MB"]})]})]})})}),C&&e.jsx(d,{title:"Error",children:e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-red-800 dark:text-red-200",children:C})})}),w&&m&&e.jsx(d,{title:"¡Números de Página Agregados!",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 p-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx(oe,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"¡Los números de página se agregaron correctamente!"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-300",children:"Descarga tu PDF numerado o procesa otro archivo."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(x,{onClick:O,className:"flex-1 bg-institutional hover:bg-institutional/90 text-white",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Descargar PDF Numerado"]}),e.jsxs(x,{onClick:U,variant:"outline",className:"flex-1",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Numerar Otro PDF"]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{title:"Opciones de Numeración","data-tour":"options",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Posición"}),e.jsxs(h,{value:a.position,onValueChange:r=>u({...a,position:r}),children:[e.jsx(g,{children:e.jsx(f,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"top-left",children:"Superior Izquierda"}),e.jsx(s,{value:"top-center",children:"Superior Centro"}),e.jsx(s,{value:"top-right",children:"Superior Derecha"}),e.jsx(s,{value:"bottom-left",children:"Inferior Izquierda"}),e.jsx(s,{value:"bottom-center",children:"Inferior Centro"}),e.jsx(s,{value:"bottom-right",children:"Inferior Derecha"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Formato"}),e.jsxs(h,{value:a.format,onValueChange:r=>u({...a,format:r}),children:[e.jsx(g,{children:e.jsx(f,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"number",children:"Solo Número (1, 2, 3...)"}),e.jsx(s,{value:"page-of-total",children:"Página de Total (1 de 10)"}),e.jsx(s,{value:"roman",children:"Números Romanos (i, ii, iii...)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Tamaño de Fuente"}),e.jsxs(h,{value:a.fontSize.toString(),onValueChange:r=>u({...a,fontSize:parseInt(r)}),children:[e.jsx(g,{children:e.jsx(f,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"10",children:"10pt"}),e.jsx(s,{value:"12",children:"12pt"}),e.jsx(s,{value:"14",children:"14pt"}),e.jsx(s,{value:"16",children:"16pt"}),e.jsx(s,{value:"18",children:"18pt"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Número de Inicio"}),e.jsxs(h,{value:a.startNumber.toString(),onValueChange:r=>u({...a,startNumber:parseInt(r)}),children:[e.jsx(g,{children:e.jsx(f,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"1",children:"1"}),e.jsx(s,{value:"0",children:"0"}),e.jsx(s,{value:"2",children:"2"}),e.jsx(s,{value:"3",children:"3"})]})]})]})]})}),e.jsx(d,{title:"Acciones","data-tour":"actions",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{onClick:E,disabled:P||!i,className:"w-full bg-institutional hover:bg-institutional/90",children:P?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"mr-2 h-4 w-4 animate-spin"}),"Agregando Números..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Agregar Números de Página"]})}),e.jsxs(x,{onClick:T,variant:"outline",className:"w-full border-institutional text-institutional hover:bg-institutional/10",children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"¿Cómo funciona? - Tour Interactivo"]})]})})]})]})})})]})]})}export{Ee as default};
