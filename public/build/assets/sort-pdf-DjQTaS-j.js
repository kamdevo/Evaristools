import{r as l,j as e,H as R}from"./app-Dsy0IDlY.js";import{a as T,B as o}from"./createLucideIcon-zWh7RBp2.js";import{T as L,a as m}from"./ToolCard-BJ-ndep7.js";import{F as _}from"./FileUploadZone-CO3fHbvG.js";import{P as j}from"./PDFButton-ZWt0sIT_.js";import{C as q,A as M}from"./driver-CbK6X61E.js";import{A as H,a as $}from"./arrow-up-d86LOr_Y.js";import{T as G}from"./trash-2-BWMY2s-Y.js";import{C as V}from"./circle-check-big-DMF8tN96.js";import{D as Z}from"./download-EoT1easo.js";import{U as O}from"./upload-BWVwj-oL.js";import{L as J}from"./loader-circle-DCybTZ4F.js";import"./app-Cr7akxs5.js";import"./badge-C5hIH6o_.js";import"./arrow-left-DYa5KCgZ.js";import"./building-2-hOcPt7xx.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],P=T("ArrowUpDown",K);function pe(){const[n,b]=l.useState(null),[g,w]=l.useState(!1),[N,u]=l.useState(!1),[t,c]=l.useState([]),[p,h]=l.useState(""),[D,i]=l.useState(""),S=l.useRef(null),A=()=>{M({showProgress:!0,popoverClass:"driverjs-theme",prevBtnText:"Anterior",nextBtnText:"Siguiente",doneBtnText:"Finalizar",steps:[{element:'[data-tour="upload"]',popover:{title:"Paso 1: Subir PDF",description:"Arrastra tu archivo PDF aquí o haz clic para seleccionarlo. El sistema detectará automáticamente el número de páginas.",side:"right",align:"start"}},{element:'[data-tour="quick-actions"]',popover:{title:"Paso 2: Acciones Rápidas",description:"Una vez que subas tu PDF y veas la lista de páginas, podrás reordenarlas arrastrándolas o usar estas acciones rápidas para invertir el orden o restablecerlo.",side:"left",align:"start"}},{element:'[data-tour="actions"]',popover:{title:"Paso 3: Guardar Cambios",description:'Una vez reordenadas las páginas, haz clic en "Guardar PDF Reordenado" para descargar el archivo con el nuevo orden.',side:"left",align:"start"}}]}).drive()},y=async r=>{const a=r[0];if(a){if(a.type!=="application/pdf"){i("Por favor selecciona un archivo PDF válido.");return}if(a.size>50*1024*1024){i("El archivo es demasiado grande. Máximo 50MB permitido.");return}b(a),i(""),u(!1),h("");try{const s=await a.arrayBuffer(),f=(await j.load(s)).getPageCount(),v=Array.from({length:f},(C,x)=>({index:x,originalIndex:x}));c(v)}catch(s){console.error("Error loading PDF:",s),i("Error al cargar el PDF. El archivo puede estar corrupto.")}}},F=(r,a)=>{if(a<0||a>=t.length)return;const s=[...t],[d]=s.splice(r,1);s.splice(a,0,d),c(s)},z=r=>{if(t.length<=1){i("No puedes eliminar todas las páginas del PDF.");return}const a=t.filter((s,d)=>d!==r);c(a)},B=()=>{c([...t].reverse())},E=()=>{const r=Array.from({length:t.length},(a,s)=>({index:t[s].originalIndex,originalIndex:t[s].originalIndex})).sort((a,s)=>a.originalIndex-s.originalIndex);c(r)},I=async()=>{if(!(!n||t.length===0)){w(!0),i("");try{const r=await n.arrayBuffer(),a=await j.load(r),s=await j.create();for(const C of t){const[x]=await s.copyPages(a,[C.originalIndex]);s.addPage(x)}const d=await s.save(),f=new Blob([d],{type:"application/pdf"}),v=URL.createObjectURL(f);h(v),u(!0)}catch(r){console.error("Error sorting PDF:",r),i("Error al ordenar el PDF. Por favor intenta de nuevo.")}finally{w(!1)}}},U=()=>{if(!p||!n)return;const r=document.createElement("a");r.href=p,r.download=`${n.name.replace(".pdf","")}_ordenado.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},k=()=>{b(null),u(!1),h(""),c([]),i(""),p&&URL.revokeObjectURL(p)};return e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Ordenar PDF - Evaristools"}),e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900",children:[e.jsx(L,{title:"Ordenar PDF",description:"Reorganiza, elimina o reordena las páginas de tus documentos PDF",icon:P}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6","data-tour":"upload",children:[!n&&e.jsxs(m,{title:"Seleccionar PDF","data-tour":"upload-zone",children:[e.jsx(_,{onFileSelect:y,acceptedTypes:".pdf",title:"Arrastra tu PDF aquí",subtitle:"o haz clic para seleccionar (máximo 50MB)"}),e.jsx("input",{ref:S,type:"file",accept:".pdf",onChange:r=>r.target.files&&y(r.target.files),className:"hidden"})]}),D&&e.jsx(m,{title:"Error",children:e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-red-800 dark:text-red-200",children:D})})}),n&&t.length>0&&!N&&e.jsx(m,{title:"Organizar Páginas","data-tour":"pages",children:e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map((r,a)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("span",{className:"font-medium text-slate-900 dark:text-white min-w-[60px]",children:["Página ",a+1]}),e.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["(Original: ",r.originalIndex+1,")"]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(o,{onClick:()=>F(a,a-1),variant:"outline",size:"sm",disabled:a===0,children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx(o,{onClick:()=>F(a,a+1),variant:"outline",size:"sm",disabled:a===t.length-1,children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(o,{onClick:()=>z(a),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(G,{className:"h-4 w-4"})})]})]},`${r.originalIndex}-${a}`))})}),N&&p&&e.jsx(m,{title:"¡PDF Ordenado Exitosamente!",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 p-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx(V,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"¡Las páginas se ordenaron correctamente!"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-300",children:"Descarga tu PDF ordenado o procesa otro archivo."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(o,{onClick:U,className:"flex-1 bg-institutional hover:bg-institutional/90",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Descargar PDF Ordenado"]}),e.jsxs(o,{onClick:k,variant:"outline",className:"flex-1",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Ordenar Otro PDF"]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(m,{title:"Acciones Rápidas","data-tour":"quick-actions",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(o,{onClick:B,variant:"outline",size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Invertir Orden"]}),e.jsx(o,{onClick:E,variant:"outline",size:"sm",children:"Restablecer Orden Original"})]})}),e.jsx(m,{title:"Acciones","data-tour":"actions",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(o,{onClick:I,disabled:g||!n,className:"flex-1 bg-institutional hover:bg-institutional/90",children:g?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Aplicar Orden"]})}),e.jsxs(o,{onClick:k,variant:"outline",className:"flex-1",disabled:g,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Seleccionar Otro PDF"]})]}),e.jsxs(o,{onClick:A,variant:"outline",className:"w-full border-institutional text-institutional hover:bg-institutional/10",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"¿Cómo funciona? - Tour Interactivo"]})]})})]})]})})})]})]})}export{pe as default};
