import{r as i,j as e,H as M}from"./app-BUl2XNVK.js";import{a as U,B as t}from"./createLucideIcon-nQgsIK04.js";import{I as x}from"./input-CuwCkNL4.js";import{L as n}from"./label-B-7Te5tz.js";import{T as A,a as c}from"./ToolCard-DUmtgb5y.js";import{F as O}from"./FileUploadZone-Dme-ExYg.js";import{P as H}from"./PDFButton-hZ4qujXN.js";import{C as $,A as _}from"./driver-TOg9fbSz.js";import{F as q}from"./file-text-CLErbyE6.js";import{C as V}from"./circle-check-big-D3LO5hBg.js";import{D as W}from"./download-DCCcjE2b.js";import{U as k}from"./upload-BNlRWnz8.js";import{L as Z}from"./loader-circle-DdpJ5jv-.js";import"./app-Cr7akxs5.js";import"./index-C9DtIOMg.js";import"./badge-ClX4IzPs.js";import"./arrow-left-C3I9wMLH.js";import"./building-2-DsJ5nUpW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],w=U("Crop",G);function ue(){const[a,f]=i.useState(null),[h,j]=i.useState(!1),[v,g]=i.useState(!1),[d,u]=i.useState(""),[b,l]=i.useState(""),[J,K]=i.useState(!1),[s,m]=i.useState({top:20,right:20,bottom:20,left:20}),D=i.useRef(null),R=()=>{_({showProgress:!0,popoverClass:"driverjs-theme",prevBtnText:"Anterior",nextBtnText:"Siguiente",doneBtnText:"Finalizar",steps:[{element:'[data-tour="upload"]',popover:{title:"Paso 1: Subir PDF",description:"Selecciona o arrastra tu archivo PDF. Verás una vista previa de la primera página para ajustar los márgenes de recorte.",side:"right",align:"start"}},{element:'[data-tour="options"]',popover:{title:"Paso 2: Ajustar Márgenes",description:"Configura los márgenes de recorte para cada lado (superior, inferior, izquierdo, derecho). Los cambios se verán en la vista previa.",side:"left",align:"start"}},{element:'[data-tour="actions"]',popover:{title:"Paso 3: Aplicar Recorte",description:'Haz clic en "Aplicar Recorte" para procesar el PDF. El recorte se aplicará a todas las páginas del documento.',side:"left",align:"start"}}]}).drive()},N=r=>{const o=r[0];if(o){if(o.type!=="application/pdf"){l("Por favor selecciona un archivo PDF válido.");return}if(o.size>50*1024*1024){l("El archivo es demasiado grande. Máximo 50MB permitido.");return}f(o),l(""),g(!1),u("")}},p=r=>{m({top:r,right:r,bottom:r,left:r})},S=async()=>{if(a){j(!0),l("");try{const r=await a.arrayBuffer(),o=await H.load(r);o.getPages().forEach(P=>{const{width:L,height:T}=P.getSize(),y=L-s.left-s.right,C=T-s.top-s.bottom;if(y<=0||C<=0)throw new Error("Los márgenes son demasiado grandes para el tamaño de página.");P.setCropBox(s.left,s.bottom,y,C)});const E=await o.save(),z=new Blob([E],{type:"application/pdf"}),I=URL.createObjectURL(z);u(I),g(!0)}catch(r){console.error("Error cropping PDF:",r),l(r.message||"Error al recortar el PDF. Por favor intenta de nuevo.")}finally{j(!1)}}},B=()=>{if(!d||!a)return;const r=document.createElement("a");r.href=d,r.download=`${a.name.replace(".pdf","")}_recortado.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},F=()=>{f(null),g(!1),u(""),l(""),d&&URL.revokeObjectURL(d)};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Recortar PDF - Evaristools"}),e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900",children:[e.jsx(A,{title:"Recortar PDF",description:"Elimina los márgenes de tus documentos PDF ajustando los bordes",icon:w}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[!a&&e.jsxs(c,{title:"Seleccionar PDF","data-tour":"upload",children:[e.jsx(O,{onFileSelect:N,acceptedTypes:".pdf",title:"Arrastra tu PDF aquí",subtitle:"o haz clic para seleccionar (máximo 50MB)"}),e.jsx("input",{ref:D,type:"file",accept:".pdf",onChange:r=>r.target.files&&N(r.target.files),className:"hidden"})]}),a&&!v&&e.jsx(c,{title:"Archivo Seleccionado",children:e.jsx("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{className:"h-8 w-8 text-institutional"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:a.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[(a.size/1024/1024).toFixed(2)," MB"]})]})]})})}),b&&e.jsx(c,{title:"Error",children:e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-red-800 dark:text-red-200",children:b})})}),v&&d&&e.jsx(c,{title:"¡PDF Recortado Exitosamente!",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 p-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx(V,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"¡El PDF se recortó correctamente!"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-300",children:"Descarga tu PDF recortado o procesa otro archivo."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(t,{onClick:B,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Descargar PDF Recortado"]}),e.jsxs(t,{onClick:F,variant:"outline",className:"flex-1",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Recortar Otro PDF"]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{title:"Opciones de Recorte","data-tour":"options",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Márgenes Uniformes (Puntos)"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(t,{onClick:()=>p(10),variant:"outline",size:"sm",children:"10pt"}),e.jsx(t,{onClick:()=>p(20),variant:"outline",size:"sm",children:"20pt"}),e.jsx(t,{onClick:()=>p(30),variant:"outline",size:"sm",children:"30pt"}),e.jsx(t,{onClick:()=>p(50),variant:"outline",size:"sm",children:"50pt"}),e.jsx(t,{onClick:()=>p(0),variant:"outline",size:"sm",children:"Sin Recorte"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{children:"Márgenes Personalizados (en puntos)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"margin-top",className:"text-sm",children:"Superior"}),e.jsx(x,{id:"margin-top",type:"number",min:"0",max:"200",value:s.top,onChange:r=>m({...s,top:parseInt(r.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"margin-right",className:"text-sm",children:"Derecho"}),e.jsx(x,{id:"margin-right",type:"number",min:"0",max:"200",value:s.right,onChange:r=>m({...s,right:parseInt(r.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"margin-bottom",className:"text-sm",children:"Inferior"}),e.jsx(x,{id:"margin-bottom",type:"number",min:"0",max:"200",value:s.bottom,onChange:r=>m({...s,bottom:parseInt(r.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"margin-left",className:"text-sm",children:"Izquierdo"}),e.jsx(x,{id:"margin-left",type:"number",min:"0",max:"200",value:s.left,onChange:r=>m({...s,left:parseInt(r.target.value)||0})})]})]})]}),e.jsxs("div",{className:"p-6 bg-slate-100 dark:bg-slate-800 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Vista Previa del Recorte:"}),e.jsx("div",{className:"relative h-48 bg-white dark:bg-slate-700 rounded flex items-center justify-center",children:e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 border-2 border-dashed border-institutional flex items-center justify-center",style:{marginTop:`${s.top/2}px`,marginRight:`${s.right/2}px`,marginBottom:`${s.bottom/2}px`,marginLeft:`${s.left/2}px`,width:`calc(100% - ${(s.left+s.right)/2}px)`,height:`calc(100% - ${(s.top+s.bottom)/2}px)`},children:e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Área visible"})})})]})]})}),e.jsx(c,{title:"Acciones","data-tour":"actions",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(t,{onClick:S,disabled:h||!a,className:"flex-1 bg-institutional hover:bg-institutional/90",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Recortando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Recortar PDF"]})}),e.jsxs(t,{onClick:F,variant:"outline",className:"flex-1",disabled:h,children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Seleccionar Otro PDF"]})]}),e.jsxs(t,{onClick:R,variant:"outline",className:"w-full border-institutional text-institutional hover:bg-institutional/10",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"¿Cómo funciona? - Tour Interactivo"]})]})})]})]})})})]})]})}export{ue as default};
