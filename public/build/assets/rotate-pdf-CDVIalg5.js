import{r as o,j as e,H as U}from"./app-BUl2XNVK.js";import{a as I,B as r}from"./createLucideIcon-nQgsIK04.js";import{L as E}from"./label-B-7Te5tz.js";import{T as H,a as c}from"./ToolCard-DUmtgb5y.js";import{F as _}from"./FileUploadZone-Dme-ExYg.js";import{P as S,d as q}from"./PDFButton-hZ4qujXN.js";import{C as Z,A as $}from"./driver-TOg9fbSz.js";import{F as G}from"./file-text-CLErbyE6.js";import{C as J}from"./circle-check-big-D3LO5hBg.js";import{D as K}from"./download-DCCcjE2b.js";import{U as B}from"./upload-BNlRWnz8.js";import{L as Q}from"./loader-circle-DdpJ5jv-.js";import"./app-Cr7akxs5.js";import"./index-C9DtIOMg.js";import"./badge-ClX4IzPs.js";import"./arrow-left-C3I9wMLH.js";import"./building-2-DsJ5nUpW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],h=I("RotateCw",V);function fe(){const[i,P]=o.useState(null),[j,w]=o.useState(!1),[A,v]=o.useState(!1),[x,R]=o.useState(0),[p,u]=o.useState(new Map),[d,b]=o.useState(""),[k,n]=o.useState(""),[W,X]=o.useState(!1),T=o.useRef(null),z=()=>{$({showProgress:!0,popoverClass:"driverjs-theme",prevBtnText:"Anterior",nextBtnText:"Siguiente",doneBtnText:"Finalizar",steps:[{element:'[data-tour="upload"]',popover:{title:"Paso 1: Subir PDF",description:"Selecciona o arrastra tu archivo PDF. El sistema cargará el documento para rotación.",side:"right",align:"start"}},{element:'[data-tour="options"]',popover:{title:"Paso 2: Elegir Rotación",description:"Selecciona el ángulo de rotación (90°, 180°, 270°). Puedes aplicarlo a todas las páginas o solo páginas específicas.",side:"left",align:"start"}},{element:'[data-tour="actions"]',popover:{title:"Paso 3: Aplicar Rotación",description:'Haz clic en "Aplicar Rotación" para procesar el PDF. El archivo rotado se descargará automáticamente.',side:"left",align:"start"}}]}).drive()},F=async a=>{const t=a[0];if(t){if(t.type!=="application/pdf"){n("Por favor selecciona un archivo PDF válido.");return}if(t.size>50*1024*1024){n("El archivo es demasiado grande. Máximo 50MB permitido.");return}P(t),n(""),v(!1),b("");try{const s=await t.arrayBuffer(),l=(await S.load(s)).getPages();R(l.length);const f=new Map;for(let m=0;m<l.length;m++)f.set(m,0);u(f)}catch(s){console.error("Error loading PDF:",s),n("Error al cargar el PDF. El archivo puede estar corrupto.")}}},y=(a,t)=>{const s=new Map(p),l=((s.get(a)||0)+t)%360;s.set(a,l),u(s)},N=a=>{const t=new Map;for(let s=0;s<x;s++){const l=((p.get(s)||0)+a)%360;t.set(s,l)}u(t)},L=async()=>{if(i){w(!0),n("");try{const a=await i.arrayBuffer(),t=await S.load(a);t.getPages().forEach((m,O)=>{const C=p.get(O)||0;C!==0&&m.setRotation(q(C))});const g=await t.save(),l=new Blob([g],{type:"application/pdf"}),f=URL.createObjectURL(l);b(f),v(!0)}catch(a){console.error("Error rotating PDF:",a),n("Error al rotar el PDF. Por favor intenta de nuevo.")}finally{w(!1)}}},M=()=>{if(!d||!i)return;const a=document.createElement("a");a.href=d,a.download=`${i.name.replace(".pdf","")}_rotado.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a)},D=()=>{P(null),v(!1),b(""),R(0),u(new Map),n(""),d&&URL.revokeObjectURL(d)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Rotar PDF - Evaristools"}),e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900",children:[e.jsx(H,{title:"Rotar PDF",description:"Rota las páginas de tus documentos PDF de forma individual o todas a la vez",icon:h}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6","data-tour":"upload",children:[!i&&e.jsxs(c,{title:"Seleccionar PDF",children:[e.jsx(_,{onFileSelect:F,acceptedTypes:".pdf",title:"Arrastra tu PDF aquí",subtitle:"o haz clic para seleccionar (máximo 50MB)"}),e.jsx("input",{ref:T,type:"file",accept:".pdf",onChange:a=>a.target.files&&F(a.target.files),className:"hidden"})]}),k&&e.jsx(c,{title:"Error",children:e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-red-800 dark:text-red-200",children:k})})}),i&&e.jsx(c,{title:"Archivo Seleccionado",children:e.jsx("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(G,{className:"h-8 w-8 text-institutional"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:i.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[x," ",x===1?"página":"páginas"]})]})]})})}),A&&d&&e.jsx(c,{title:"¡PDF Rotado Exitosamente!",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 p-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx(J,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"¡Las rotaciones se aplicaron correctamente!"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-300",children:"Descarga tu PDF rotado o procesa otro archivo."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(r,{onClick:M,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Descargar PDF Rotado"]}),e.jsxs(r,{onClick:D,variant:"outline",className:"flex-1",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Rotar Otro PDF"]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{title:"Opciones de Rotación","data-tour":"options",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx(E,{className:"text-base mb-3 block",children:"Rotar Todas las Páginas"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{onClick:()=>N(90),variant:"outline",size:"sm",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"90° Derecha"]}),e.jsxs(r,{onClick:()=>N(-90),variant:"outline",size:"sm",children:[e.jsx(h,{className:"h-4 w-4 mr-2 transform scale-x-[-1]"}),"90° Izquierda"]}),e.jsx(r,{onClick:()=>N(180),variant:"outline",size:"sm",children:"180°"})]})]}),e.jsxs("div",{children:[e.jsx(E,{className:"text-base mb-3 block",children:"Rotar Páginas Individuales"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:Array.from({length:x},(a,t)=>e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:["Página ",t+1]}),e.jsxs("span",{className:"text-xs text-slate-600 dark:text-slate-300",children:[p.get(t)||0,"°"]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(r,{onClick:()=>y(t,90),variant:"outline",size:"sm",className:"flex-1 text-xs",children:"90°"}),e.jsx(r,{onClick:()=>y(t,-90),variant:"outline",size:"sm",className:"flex-1 text-xs",children:"-90°"})]})]},t))})]})]})}),e.jsx(c,{title:"Acciones","data-tour":"actions",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(r,{onClick:L,disabled:j||!i,className:"flex-1 bg-institutional hover:bg-institutional/90",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Aplicando Rotaciones..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Aplicar Rotaciones"]})}),e.jsxs(r,{onClick:D,variant:"outline",className:"flex-1",disabled:j,children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Seleccionar Otro"]})]}),e.jsxs(r,{onClick:z,variant:"outline",className:"w-full border-institutional text-institutional hover:bg-institutional/10",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"¿Cómo funciona? - Tour Interactivo"]})]})})]})]})})})]})]})}export{fe as default};
