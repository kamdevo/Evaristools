import{r,j as e,H as B,a as M}from"./app-CPNA5fkj.js";import{a as D,B as x}from"./createLucideIcon-CNZUbRUR.js";import{L as G}from"./label-Df9ZlVEi.js";import{S as A,a as H,b as V,c as q,d as j}from"./select-BtBs2LAY.js";import{C as z,A as J}from"./driver-XYzfMZAG.js";import{T as _,a as u}from"./ToolCard-DvrNwqcD.js";import{F as $}from"./FileUploadZone-Bf4dPOuB.js";import{P as K}from"./ProgressBar-Dw0qLVHF.js";import{U as X}from"./upload-B_bVGoQi.js";import{E as Z}from"./eye-BQVjxIxA.js";import{S as Q}from"./sticky-note-xufIRPRR.js";import{C as W}from"./check-4S0zZpaR.js";import{C as Y}from"./copy-n2FlFCv1.js";import{D as ee}from"./download-g0joWv_C.js";import{L as te}from"./loader-circle-Brj18nMe.js";import"./app-Cr7akxs5.js";import"./index-CRnDzTJV.js";import"./index-BElPaYps.js";import"./index-CK-lEGpX.js";import"./index-lXKd38Td.js";import"./index-BS5SJy3R.js";import"./index-6UVGBoHO.js";import"./badge-kZYjAK_4.js";import"./arrow-left-DbcVuJzq.js";import"./building-2-DNyTMdoQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 8h8",key:"1jbsf9"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M7 16h6",key:"1vyc9m"}]],l=D("ScanText",ae);function Ee(){const[s,w]=r.useState(null),[v,P]=r.useState(""),[g,b]=r.useState(!1),[C,o]=r.useState(0),[i,c]=r.useState(""),[N,h]=r.useState(0),[S,d]=r.useState(""),[y,m]=r.useState(!1),[p,T]=r.useState({language:"spa+eng",outputFormat:"text"});r.useRef(null);const E=()=>{J({showProgress:!0,popoverClass:"driverjs-theme",prevBtnText:"Anterior",nextBtnText:"Siguiente",doneBtnText:"Finalizar",steps:[{element:'[data-tour="upload"]',popover:{title:"Paso 1: Subir Imagen",description:"Selecciona una imagen (JPG, PNG, etc.) que contenga texto. El sistema usar√° OCR para extraer el texto autom√°ticamente.",side:"right",align:"start"}},{element:'[data-tour="options"]',popover:{title:"Paso 2: Configurar OCR",description:"Selecciona el idioma del texto en la imagen. El OCR funciona mejor con im√°genes de alta calidad y texto claro.",side:"left",align:"start"}},{element:'[data-tour="options"]',popover:{title:"Paso 3: Extraer y Ver Resultados",description:'Haz clic en "Extraer Texto" para procesar la imagen. El texto extra√≠do aparecer√° debajo y podr√°s copiarlo o descargarlo.',side:"left",align:"start"}}]}).drive()};r.useRef(null);const f=r.useRef(null),F=["image/jpeg","image/jpg","image/png","image/bmp","image/tiff"],k=t=>{if(t.type==="application/pdf"){alert(`‚ö†Ô∏è Los archivos PDF no son soportados directamente por el OCR.

üí° Sugerencias:
‚Ä¢ Convierte las p√°ginas del PDF a im√°genes (JPG/PNG)
‚Ä¢ Usa herramientas como "PDF a Im√°genes"
‚Ä¢ Toma capturas de pantalla de las p√°ginas

Formatos soportados: JPG, PNG, BMP, TIFF`);return}if(!F.includes(t.type)){alert(`Por favor selecciona un archivo de imagen v√°lido.

Formatos soportados: JPG, PNG, BMP, TIFF`);return}w(t),c(""),h(0),o(0);const a=URL.createObjectURL(t);P(a)},R=async()=>{if(s){b(!0),o(0),c(""),h(0);try{d("Preparando archivo..."),o(10);const t=new FormData;t.append("file",s),t.append("language",p.language),d("Extrayendo texto de la imagen..."),o(30);const a=await M.post("/tools/ocr-extract/extract",t,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},timeout:6e4});if(o(90),a.data.success)c(a.data.text),h(a.data.confidence),d("¬°Texto extra√≠do exitosamente!"),o(100);else throw new Error(a.data.error||"Error al procesar")}catch(t){console.error("Error extrayendo texto:",t);let a="Error al extraer texto de la imagen. Por favor intenta con otra imagen.";t.response?.data?.error?a=t.response.data.error:t.message&&(a=t.message),alert(a),d("Error en el procesamiento")}finally{b(!1),C!==100&&o(0)}}},I=()=>{if(!i||!s)return;const t=new Blob([i],{type:"text/plain"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a;const U=s.name.replace(/\.[^/.]+$/,"")+"_texto_extraido.txt";n.download=U,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)},O=async()=>{if(i)try{await navigator.clipboard.writeText(i),m(!0),setTimeout(()=>m(!1),2e3)}catch(t){console.error("Error copiando al portapapeles:",t),f.current&&(f.current.select(),document.execCommand("copy"),m(!0),setTimeout(()=>m(!1),2e3))}},L=t=>{switch(t){case"spa":return"Espa√±ol";case"eng":return"Ingl√©s";case"spa+eng":return"Espa√±ol + Ingl√©s";default:return t}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"OCR y Extracci√≥n de Texto - Evaristools",children:e.jsx("meta",{name:"description",content:"Extrae texto de im√°genes y documentos PDF escaneados - Hospital Universitario del Valle"})}),e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900",children:[e.jsx(_,{title:"OCR y Extracci√≥n de Texto",description:"Convierte im√°genes en texto editable mediante OCR",icon:l,showPopularBadge:!0}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(u,{title:"Subir Imagen","data-tour":"upload",description:"Selecciona una imagen para extraer el texto mediante OCR",icon:X,children:e.jsx($,{onFileSelect:t=>k(t[0]),acceptedTypes:".jpg,.jpeg,.png,.bmp,.tiff",multiple:!1,hasFiles:!!s,title:"Arrastra tu archivo aqu√≠",subtitle:"Soporta JPG, PNG, BMP, TIFF",buttonText:"Seleccionar Archivo",fileInfo:s?e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"h-12 w-12 mx-auto text-institutional"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:s.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Listo para procesar"})]}):void 0})}),v&&e.jsx(u,{title:"Vista Previa",icon:Z,children:e.jsx("div",{className:"border rounded-lg overflow-hidden",children:s?.type==="application/pdf"?e.jsxs("div",{className:"p-8 text-center bg-slate-50 dark:bg-slate-800",children:[e.jsx(Q,{className:"h-16 w-16 mx-auto text-slate-400 mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Archivo PDF listo para procesar"})]}):e.jsx("img",{src:v,alt:"Vista previa",className:"w-full h-auto max-h-96 object-contain"})})})]}),e.jsxs("div",{className:"space-y-6",children:[i&&e.jsxs(u,{title:"Texto Extra√≠do",description:`Idioma: ${L(p.language)} - Confianza: ${N}%`,icon:l,children:[e.jsx("textarea",{ref:f,value:i,onChange:t=>c(t.target.value),placeholder:"El texto extra√≠do aparecer√° aqu√≠...",className:"min-h-48 resize-vertical w-full p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-institutional focus:border-transparent",rows:12}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{onClick:O,variant:"outline",className:"flex-1",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Copiado"]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Copiar"]})}),e.jsxs(x,{onClick:I,className:"flex-1 bg-institutional hover:bg-institutional/90 text-white",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Descargar"]})]})]}),e.jsxs(u,{title:"Opciones de OCR","data-tour":"options",description:"Configura el reconocimiento √≥ptico de caracteres",icon:l,children:[e.jsxs("div",{children:[e.jsx(G,{htmlFor:"language",children:"Idioma de Reconocimiento"}),e.jsxs(A,{value:p.language,onValueChange:t=>T({...p,language:t}),children:[e.jsx(H,{children:e.jsx(V,{})}),e.jsxs(q,{children:[e.jsx(j,{value:"spa+eng",children:"Espa√±ol + Ingl√©s"}),e.jsx(j,{value:"spa",children:"Solo Espa√±ol"}),e.jsx(j,{value:"eng",children:"Solo Ingl√©s"})]})]})]}),e.jsx(x,{onClick:R,disabled:!s||g,className:"w-full bg-institutional hover:bg-institutional/90",children:g?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}),S]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"h-4 w-4 mr-2"}),"Extraer Texto"]})}),g&&e.jsx(K,{progress:C,message:"Progreso",showPercentage:!0}),e.jsxs(x,{onClick:E,variant:"outline",className:"w-full border-institutional text-institutional hover:bg-institutional/10",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"¬øC√≥mo funciona? - Tour Interactivo"]})]})]})]})})})]})]})}export{Ee as default};
