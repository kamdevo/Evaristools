import{r as n,j as e,H as K}from"./app-BUl2XNVK.js";import{a as Q,B as x}from"./createLucideIcon-nQgsIK04.js";import{L as p}from"./label-B-7Te5tz.js";import{S as h,a as g,b as f,c as j,d as s}from"./select-B0p1BmPo.js";import{T as Y,a as d}from"./ToolCard-DUmtgb5y.js";import{F as W}from"./FileUploadZone-Dme-ExYg.js";import{P as ee,S as re,r as se}from"./PDFButton-hZ4qujXN.js";import{C as ae,A as te}from"./driver-TOg9fbSz.js";import{F as oe}from"./file-text-CLErbyE6.js";import{C as ie}from"./circle-check-big-D3LO5hBg.js";import{D as ne}from"./download-DCCcjE2b.js";import{U as I}from"./upload-BNlRWnz8.js";import{L as le}from"./loader-circle-DdpJ5jv-.js";import"./app-Cr7akxs5.js";import"./index-C9DtIOMg.js";import"./index-DOUm2yKn.js";import"./index-Bf4XkVMb.js";import"./index-Cq-g54fJ.js";import"./index-5B9PyxwO.js";import"./index-DbcoFDDr.js";import"./check-DIFDNKts.js";import"./badge-ClX4IzPs.js";import"./arrow-left-C3I9wMLH.js";import"./building-2-DsJ5nUpW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],T=Q("Hash",ce);function Oe(){const[i,P]=n.useState(null),[v,S]=n.useState(!1),[w,N]=n.useState(!1),[m,b]=n.useState(""),[C,l]=n.useState(""),[de,me]=n.useState(!1),[t,u]=n.useState({position:"bottom-center",startNumber:1,format:"page-of-total",fontSize:12}),A=n.useRef(null),B=()=>{te({showProgress:!0,popoverClass:"driverjs-theme",prevBtnText:"Anterior",nextBtnText:"Siguiente",doneBtnText:"Finalizar",steps:[{element:'[data-tour="upload-zone"]',popover:{title:"Paso 1: Seleccionar PDF",description:"Arrastra tu archivo PDF aquí o haz clic para seleccionarlo. El archivo debe ser menor a 50MB.",side:"bottom",align:"start"}},{element:'[data-tour="options"]',popover:{title:"Paso 2: Configurar Opciones",description:"Personaliza la posición, formato, tamaño de fuente y número de inicio para los números de página.",side:"left",align:"start"}},{element:'[data-tour="actions"]',popover:{title:"Paso 3: Aplicar Números",description:'Haz clic en "Agregar Números de Página" para procesar tu documento. Una vez completado, podrás descargarlo.',side:"left",align:"start"}}]}).drive()},F=r=>{const a=r[0];if(a){if(a.type!=="application/pdf"){l("Por favor selecciona un archivo PDF válido.");return}if(a.size>50*1024*1024){l("El archivo es demasiado grande. Máximo 50MB permitido.");return}P(a),l(""),N(!1),b("")}},L=r=>{const a=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let o="";for(const[c,y]of a)for(;r>=c;)o+=y,r-=c;return o.toLowerCase()},O=(r,a)=>{switch(t.format){case"number":return`${r}`;case"page-of-total":return`${r} de ${a}`;case"roman":return L(r);default:return`${r}`}},E=(r,a,o)=>{switch(t.position){case"top-left":return{x:30,y:a-30};case"top-center":return{x:(r-o)/2,y:a-30};case"top-right":return{x:r-o-30,y:a-30};case"bottom-left":return{x:30,y:30};case"bottom-center":return{x:(r-o)/2,y:30};case"bottom-right":return{x:r-o-30,y:30};default:return{x:(r-o)/2,y:30}}},U=async()=>{if(i){S(!0),l("");try{const r=await i.arrayBuffer(),a=await ee.load(r),o=a.getPages(),c=await a.embedFont(re.Helvetica),y=o.length;o.forEach((D,$)=>{const q=$+t.startNumber,z=O(q,y+t.startNumber-1),X=c.widthOfTextAtSize(z,t.fontSize),{width:_,height:Z}=D.getSize(),{x:G,y:J}=E(_,Z,X);D.drawText(z,{x:G,y:J,size:t.fontSize,font:c,color:se(0,0,0)})});const M=await a.save(),V=new Blob([M],{type:"application/pdf"}),H=URL.createObjectURL(V);b(H),N(!0)}catch(r){console.error("Error adding page numbers:",r),l("Error al agregar números de página. Por favor intenta de nuevo.")}finally{S(!1)}}},R=()=>{if(!m||!i)return;const r=document.createElement("a");r.href=m,r.download=`${i.name.replace(".pdf","")}_numerado.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},k=()=>{P(null),N(!1),b(""),l(""),m&&URL.revokeObjectURL(m)};return e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Números de Página - Evaristools"}),e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900",children:[e.jsx(Y,{title:"Números de Página",description:"Añade números de página personalizados a tus documentos PDF",icon:T}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6","data-tour":"upload",children:[!i&&e.jsxs(d,{title:"Seleccionar PDF","data-tour":"upload-zone",children:[e.jsx(W,{onFileSelect:F,acceptedTypes:".pdf",title:"Arrastra tu PDF aquí",subtitle:"o haz clic para seleccionar (máximo 50MB)"}),e.jsx("input",{ref:A,type:"file",accept:".pdf",onChange:r=>r.target.files&&F(r.target.files),className:"hidden"})]}),i&&!w&&e.jsx(d,{title:"Archivo Seleccionado",children:e.jsx("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oe,{className:"h-8 w-8 text-institutional"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:i.name}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[(i.size/1024/1024).toFixed(2)," MB"]})]})]})})}),C&&e.jsx(d,{title:"Error",children:e.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-red-800 dark:text-red-200",children:C})})}),w&&m&&e.jsx(d,{title:"¡Números de Página Agregados!",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 p-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx(ie,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"¡Los números de página se agregaron correctamente!"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-300",children:"Descarga tu PDF numerado o procesa otro archivo."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(x,{onClick:R,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Descargar PDF Numerado"]}),e.jsxs(x,{onClick:k,variant:"outline",className:"flex-1",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Numerar Otro PDF"]})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{title:"Opciones de Numeración","data-tour":"options",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Posición"}),e.jsxs(h,{value:t.position,onValueChange:r=>u({...t,position:r}),children:[e.jsx(g,{children:e.jsx(f,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"top-left",children:"Superior Izquierda"}),e.jsx(s,{value:"top-center",children:"Superior Centro"}),e.jsx(s,{value:"top-right",children:"Superior Derecha"}),e.jsx(s,{value:"bottom-left",children:"Inferior Izquierda"}),e.jsx(s,{value:"bottom-center",children:"Inferior Centro"}),e.jsx(s,{value:"bottom-right",children:"Inferior Derecha"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Formato"}),e.jsxs(h,{value:t.format,onValueChange:r=>u({...t,format:r}),children:[e.jsx(g,{children:e.jsx(f,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"number",children:"Solo Número (1, 2, 3...)"}),e.jsx(s,{value:"page-of-total",children:"Página de Total (1 de 10)"}),e.jsx(s,{value:"roman",children:"Números Romanos (i, ii, iii...)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Tamaño de Fuente"}),e.jsxs(h,{value:t.fontSize.toString(),onValueChange:r=>u({...t,fontSize:parseInt(r)}),children:[e.jsx(g,{children:e.jsx(f,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"10",children:"10pt"}),e.jsx(s,{value:"12",children:"12pt"}),e.jsx(s,{value:"14",children:"14pt"}),e.jsx(s,{value:"16",children:"16pt"}),e.jsx(s,{value:"18",children:"18pt"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Número de Inicio"}),e.jsxs(h,{value:t.startNumber.toString(),onValueChange:r=>u({...t,startNumber:parseInt(r)}),children:[e.jsx(g,{children:e.jsx(f,{})}),e.jsxs(j,{children:[e.jsx(s,{value:"1",children:"1"}),e.jsx(s,{value:"0",children:"0"}),e.jsx(s,{value:"2",children:"2"}),e.jsx(s,{value:"3",children:"3"})]})]})]})]})}),e.jsx(d,{title:"Acciones","data-tour":"actions",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(x,{onClick:U,disabled:v||!i,className:"flex-1 bg-institutional hover:bg-institutional/90",children:v?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"mr-2 h-4 w-4 animate-spin"}),"Agregando Números..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Agregar Números de Página"]})}),e.jsxs(x,{onClick:k,variant:"outline",className:"flex-1",disabled:v,children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Seleccionar Otro PDF"]})]}),e.jsxs(x,{onClick:B,variant:"outline",className:"w-full border-institutional text-institutional hover:bg-institutional/10",children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"¿Cómo funciona? - Tour Interactivo"]})]})})]})]})})})]})]})}export{Oe as default};
