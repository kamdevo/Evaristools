import{r as a,j as e,H as B}from"./app-BUl2XNVK.js";import{a as G,B as p}from"./createLucideIcon-nQgsIK04.js";import{L as z}from"./label-B-7Te5tz.js";import{S as D,a as A,b as H,c as V,d as v}from"./select-B0p1BmPo.js";import{s as q}from"./index-DYjR-Pq2.js";import{C as J,A as _}from"./driver-TOg9fbSz.js";import{T as $,a as h}from"./ToolCard-DUmtgb5y.js";import{F as W}from"./FileUploadZone-Dme-ExYg.js";import{P as Z}from"./ProgressBar-18-o6m3Z.js";import{U as K}from"./upload-BNlRWnz8.js";import{E as Q}from"./eye-DqMBglr6.js";import{S as X}from"./sticky-note-DVihKD6H.js";import{C as Y}from"./copy-Gf-8adWO.js";import{D as ee}from"./download-DCCcjE2b.js";import{L as te}from"./loader-circle-DdpJ5jv-.js";import"./app-Cr7akxs5.js";import"./index-C9DtIOMg.js";import"./index-DOUm2yKn.js";import"./index-Bf4XkVMb.js";import"./index-Cq-g54fJ.js";import"./index-5B9PyxwO.js";import"./index-DbcoFDDr.js";import"./check-DIFDNKts.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./badge-ClX4IzPs.js";import"./arrow-left-C3I9wMLH.js";import"./building-2-DsJ5nUpW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 8h8",key:"1jbsf9"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M7 16h6",key:"1vyc9m"}]],m=G("ScanText",ae);function ke(){const[o,b]=a.useState(null),[x,C]=a.useState(""),[f,w]=a.useState(!1),[N,l]=a.useState(0),[s,c]=a.useState(""),[S,u]=a.useState(0),[T,i]=a.useState(""),[g,E]=a.useState({language:"spa+eng",outputFormat:"text"}),P=a.useRef(null),R=()=>{_({showProgress:!0,popoverClass:"driverjs-theme",prevBtnText:"Anterior",nextBtnText:"Siguiente",doneBtnText:"Finalizar",steps:[{element:'[data-tour="upload"]',popover:{title:"Paso 1: Subir Imagen",description:"Selecciona una imagen (JPG, PNG, etc.) que contenga texto. El sistema usar√° OCR para extraer el texto autom√°ticamente.",side:"right",align:"start"}},{element:'[data-tour="options"]',popover:{title:"Paso 2: Configurar OCR",description:"Selecciona el idioma del texto en la imagen. El OCR funciona mejor con im√°genes de alta calidad y texto claro.",side:"left",align:"start"}},{element:'[data-tour="options"]',popover:{title:"Paso 3: Extraer y Ver Resultados",description:'Haz clic en "Extraer Texto" para procesar la imagen. El texto extra√≠do aparecer√° debajo y podr√°s copiarlo o descargarlo.',side:"left",align:"start"}}]}).drive()};a.useRef(null);const j=a.useRef(null),k=["image/jpeg","image/jpg","image/png","image/bmp","image/tiff"],F=t=>{if(t.type==="application/pdf"){alert(`‚ö†Ô∏è Los archivos PDF no son soportados directamente por el OCR.

üí° Sugerencias:
‚Ä¢ Convierte las p√°ginas del PDF a im√°genes (JPG/PNG)
‚Ä¢ Usa herramientas como "PDF a Im√°genes"
‚Ä¢ Toma capturas de pantalla de las p√°ginas

Formatos soportados: JPG, PNG, BMP, TIFF`);return}if(!k.includes(t.type)){alert(`Por favor selecciona un archivo de imagen v√°lido.

Formatos soportados: JPG, PNG, BMP, TIFF`);return}b(t),c(""),u(0),l(0);const n=URL.createObjectURL(t);C(n)},I=async()=>{if(o){w(!0),l(0),c(""),u(0);try{i("Inicializando OCR...");const t=await q.createWorker(g.language,1,{logger:d=>{if(console.log(d),d.status==="recognizing text"){const y=Math.round(d.progress*100);l(y),i(`Reconociendo texto... ${y}%`)}}});i("Procesando imagen...");const{data:{text:n,confidence:r}}=await t.recognize(o);c(n),u(Math.round(r)),i("¬°Texto extra√≠do exitosamente!"),await t.terminate()}catch(t){console.error("Error extrayendo texto:",t),alert("Error al extraer texto de la imagen. Por favor intenta con otra imagen."),i("Error en el procesamiento")}finally{w(!1),l(100)}}},O=()=>{if(!s||!o)return;const t=new Blob([s],{type:"text/plain"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n;const d=o.name.replace(/\.[^/.]+$/,"")+"_texto_extraido.txt";r.download=d,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},L=async()=>{if(s)try{await navigator.clipboard.writeText(s),alert("Texto copiado al portapapeles")}catch(t){console.error("Error copiando al portapapeles:",t),j.current&&(j.current.select(),document.execCommand("copy"),alert("Texto copiado al portapapeles"))}},U=()=>{b(null),C(""),c(""),u(0),l(0),i(""),P.current&&(P.current.value=""),x&&URL.revokeObjectURL(x)},M=t=>{switch(t){case"spa":return"Espa√±ol";case"eng":return"Ingl√©s";case"spa+eng":return"Espa√±ol + Ingl√©s";default:return t}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"OCR y Extracci√≥n de Texto - Evaristools",children:e.jsx("meta",{name:"description",content:"Extrae texto de im√°genes y documentos PDF escaneados - Hospital Universitario del Valle"})}),e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900",children:[e.jsx($,{title:"OCR y Extracci√≥n de Texto",description:"Convierte im√°genes en texto editable mediante OCR",icon:m,showPopularBadge:!0}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{title:"Subir Imagen","data-tour":"upload",description:"Selecciona una imagen para extraer el texto mediante OCR",icon:K,children:[e.jsx(W,{onFileSelect:t=>F(t[0]),acceptedTypes:".jpg,.jpeg,.png,.bmp,.tiff",multiple:!1,hasFiles:!!o,title:"Arrastra tu archivo aqu√≠",subtitle:"Soporta JPG, PNG, BMP, TIFF",buttonText:"Seleccionar Archivo",fileInfo:o?e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"h-12 w-12 mx-auto text-institutional"}),e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:o.name}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Listo para procesar"})]}):void 0}),o&&e.jsx(p,{onClick:U,variant:"outline",className:"w-full",children:"Cambiar Archivo"})]}),x&&e.jsx(h,{title:"Vista Previa",icon:Q,children:e.jsx("div",{className:"border rounded-lg overflow-hidden",children:o?.type==="application/pdf"?e.jsxs("div",{className:"p-8 text-center bg-slate-50 dark:bg-slate-800",children:[e.jsx(X,{className:"h-16 w-16 mx-auto text-slate-400 mb-4"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Archivo PDF listo para procesar"})]}):e.jsx("img",{src:x,alt:"Vista previa",className:"w-full h-auto max-h-96 object-contain"})})})]}),e.jsxs("div",{className:"space-y-6",children:[s&&e.jsxs(h,{title:"Texto Extra√≠do",description:`Idioma: ${M(g.language)} - Confianza: ${S}%`,icon:m,children:[e.jsx("textarea",{ref:j,value:s,onChange:t=>c(t.target.value),placeholder:"El texto extra√≠do aparecer√° aqu√≠...",className:"min-h-48 resize-vertical w-full p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-institutional focus:border-transparent",rows:12}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{onClick:L,variant:"outline",className:"flex-1",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Copiar"]}),e.jsxs(p,{onClick:O,className:"flex-1 bg-institutional hover:bg-institutional/90 text-white",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Descargar"]})]})]}),e.jsxs(h,{title:"Opciones de OCR","data-tour":"options",description:"Configura el reconocimiento √≥ptico de caracteres",icon:m,children:[e.jsxs("div",{children:[e.jsx(z,{htmlFor:"language",children:"Idioma de Reconocimiento"}),e.jsxs(D,{value:g.language,onValueChange:t=>E({...g,language:t}),children:[e.jsx(A,{children:e.jsx(H,{})}),e.jsxs(V,{children:[e.jsx(v,{value:"spa+eng",children:"Espa√±ol + Ingl√©s"}),e.jsx(v,{value:"spa",children:"Solo Espa√±ol"}),e.jsx(v,{value:"eng",children:"Solo Ingl√©s"})]})]})]}),e.jsx(p,{onClick:I,disabled:!o||f,className:"w-full bg-institutional hover:bg-institutional/90",children:f?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-4 w-4 mr-2 animate-spin"}),T]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"Extraer Texto"]})}),f&&e.jsx(Z,{progress:N,message:"Progreso",showPercentage:!0}),e.jsxs(p,{onClick:R,variant:"outline",className:"w-full border-institutional text-institutional hover:bg-institutional/10",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"¬øC√≥mo funciona? - Tour Interactivo"]})]})]})]})})})]})]})}export{ke as default};
